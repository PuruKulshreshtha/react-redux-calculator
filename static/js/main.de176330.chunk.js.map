{"version":3,"sources":["utils/index.js","redux/constants/index.js","redux/actions/index.js","components/Button.jsx","components/Display.jsx","App.js","redux/reducers/index.js","index.js"],"names":["calculation","calcArray","currentResult","isNaN","length","currentOp","calc","s","ch","current","i","charAt","indexOf","push","parseFloat","parseCalculationString","join","ops","a","b","newCalc","j","console","log","ActionTypes","UPDATE_CALCULATION_AND_RESULT","CLEAR_ALL","updateCalculation","inputValue","currentState","updateCalculationArray","value","operatorValues","lastDotIndex","lastIndexOf","li","includes","lastVal","lastValIsOperator","currentValIsOperator","addValueToCalculation","calculationResult","type","payload","result","connect","state","props","additionalClassWrapper","additionalClass","onClick","dispatch","htmlCode","className","String","fromCharCode","Display","formatNumber","num","toString","replace","this","_forceScrollOnDisplay","split","map","data","toPrecision","refs","calculationDisplay","scrollLeft","resultDisplay","ref","dangerouslySetInnerHTML","__html","_replaceChars","Component","initialState","calculatorReducer","action","store","createStore","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.de176330.chunk.js","sourcesContent":["function parseCalculationString(s) {\n  // Parse a calculation string into an array of numbers and operators\n  let calculation = [],\n    current = \"\";\n  for (let i = 0, ch; (ch = s.charAt(i)); i++) {\n    if (\"*/+-\".indexOf(ch) > -1) {\n      if (current === \"\" && ch === \"-\") {\n        current = \"-\";\n      } else {\n        calculation.push(parseFloat(current), ch);\n        current = \"\";\n      }\n    } else {\n      current += s.charAt(i);\n    }\n  }\n  if (current !== \"\") {\n    if (current === \"0.\") {\n      calculation.push(\"0.\");\n    } else {\n      calculation.push(parseFloat(current));\n    }\n  }\n  return calculation;\n}\n\nexport const calculation = (calcArray, currentResult) => {\n  if (isNaN(calcArray[calcArray.length - 1])) {\n    return currentResult;\n  }\n  let calcString = calcArray.join(\"\");\n  // Example [4,5,'+',2,'/',6] -> '45+2/6' -> ['45','+','2','/','6']\n  let calc = parseCalculationString(calcString);\n  // let calc = calcString.split(/(\\+|-|\\*|\\/)/g);\n  let ops = [\n      { \"/\": (a, b) => a / b },\n      { \"*\": (a, b) => a * b },\n      { \"+\": (a, b) => a + b },\n      { \"-\": (a, b) => a - b }\n    ],\n    newCalc = [],\n    currentOp;\n  for (let i = 0; i < ops.length; i++) {\n    for (let j = 0; j < calc.length; j++) {\n      if (ops[i][calc[j]]) {\n        currentOp = ops[i][calc[j]];\n      } else if (currentOp) {\n        newCalc[newCalc.length - 1] = currentOp(\n          newCalc[newCalc.length - 1],\n          calc[j]\n        );\n        currentOp = null;\n      } else {\n        newCalc.push(calc[j]);\n      }\n    }\n    calc = newCalc;\n    newCalc = [];\n  }\n\n  if (calc.length > 1) {\n    console.log(\"Error: unable to resolve calculation\");\n    return calc;\n  } else {\n    return calc[0];\n  }\n};\n\nexport const addValueToCalculation = (value, currentState) => {\n  currentState = [...currentState];\n\n  let operatorValues = [\"*\", \"/\", \"+\", \"-\"];\n\n  // handle dot key\n  if (value === \".\") {\n    if (!currentState.length) {\n      return [...currentState, \"0.\"];\n    } else {\n      let lastDotIndex = currentState.lastIndexOf(\".\");\n      if (lastDotIndex === -1) {\n        lastDotIndex = currentState.lastIndexOf(\"0.\");\n      }\n      if (lastDotIndex !== -1) {\n        for (let li = lastDotIndex; li < currentState.length; li++) {\n          if (operatorValues.includes(currentState[li])) {\n            return [...currentState, value];\n          }\n        }\n      } else {\n        return [...currentState, value];\n      }\n      return currentState;\n    }\n  }\n\n  if ([\"±\", \"%\", \"=\"].includes(value)) {\n    if (calculation(currentState)) {\n      if (value === \"%\") {\n        return [calculation(currentState) / 100];\n      } else if (value === \"±\") {\n        return [calculation(currentState) * -1];\n      }\n      return [calculation(currentState)];\n    }\n  }\n  if (typeof value !== \"number\" && !operatorValues.includes(value)) {\n    return currentState;\n  }\n\n  if (operatorValues.includes(value) && !currentState.length) {\n    return currentState;\n  }\n\n  let lastVal = currentState[currentState.length - 1];\n\n  let lastValIsOperator = operatorValues.includes(lastVal);\n\n  let currentValIsOperator = operatorValues.includes(value);\n\n  if (currentValIsOperator && lastVal === \".\") {\n    currentState[currentState.length - 1] = value;\n    return currentState;\n  }\n  if (lastValIsOperator && currentValIsOperator) {\n    currentState[currentState.length - 1] = value;\n    return currentState;\n  }\n\n  return [...currentState, value];\n};\n","const ActionTypes = {\n  UPDATE_CALCULATION_AND_RESULT: \"UPDATE_CALCULATION_AND_RESULT\",\n  CLEAR_ALL: \"CLEAR_ALL\"\n};\n\nexport default ActionTypes;\n","import { calculation, addValueToCalculation } from \"../../utils\";\nimport ActionTypes from \"../constants\";\nconst { UPDATE_CALCULATION_AND_RESULT, CLEAR_ALL } = ActionTypes;\n\nexport const updateCalculation = (inputValue, currentState, currentResult) => {\n  let updateCalculationArray = addValueToCalculation(inputValue, currentState);\n  let calculationResult = calculation(updateCalculationArray, currentResult);\n\n  return {\n    type: UPDATE_CALCULATION_AND_RESULT,\n    payload: {\n      calculation: updateCalculationArray,\n      result: calculationResult\n    }\n  };\n};\n\nexport const clearCalculation = () => {\n  return {\n    type: CLEAR_ALL,\n    payload: {\n      calculation: [],\n      result: 0\n    }\n  };\n};\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { updateCalculation } from \"../redux/actions\";\n\nconst Button = props => {\n  const {\n    additionalClassWrapper = \"\",\n    additionalClass = \"\",\n    onClick,\n    dispatch,\n    value,\n    calculation,\n    result,\n    htmlCode\n  } = props;\n  return (\n    <div className={`Button ${additionalClassWrapper}`}>\n      <button\n        className={`calc-input ${additionalClass}`}\n        onClick={\n          onClick\n            ? onClick\n            : () => dispatch(updateCalculation(value, calculation, result))\n        }\n      >\n        {htmlCode ? String.fromCharCode(htmlCode) : value}\n      </button>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => ({\n  calculation: state.calculation,\n  result: state.result\n});\n\nexport default connect(mapStateToProps)(Button);\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nclass Display extends Component {\n  componentDidMount() {\n    this._forceScrollOnDisplay();\n  }\n\n  componentDidUpdate() {\n    this._forceScrollOnDisplay();\n  }\n\n  _replaceChars(value) {\n    value = value.join(\"\");\n    value = value.split(/(\\+|-|\\*|\\/)/g).map(data => {\n      if (data.length > 8) {\n        return parseFloat(data).toPrecision(2);\n      }\n      return data;\n    });\n    value = value.join(\"\");\n    value = value.replace(/\\//g, '<span class=\"operatorStyle\">÷</span>');\n    value = value.replace(/\\*/g, '<span class=\"operatorStyle\">×</span>');\n    value = value.replace(/\\+/g, '<span class=\"operatorStyle\">+</span>');\n    value = value.replace(/-/g, '<span class=\"operatorStyle\">-</span>');\n    return value;\n  }\n\n  _forceScrollOnDisplay() {\n    this.refs.calculationDisplay.scrollLeft = 10000;\n    this.refs.resultDisplay.scrollLeft = 10000;\n  }\n\n  formatNumber = num => {\n    return num.toString().replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, \"$1,\");\n  };\n  render() {\n    const { result, calculation } = this.props;\n    return (\n      <div className=\"calculator-results\">\n        <div\n          ref=\"calculationDisplay\"\n          className=\"calculationDisplay\"\n          dangerouslySetInnerHTML={{\n            __html: calculation.length ? this._replaceChars(calculation) : 0\n          }}\n        />\n        <div ref=\"resultDisplay\" className=\"resultDisplay\">\n          {result.toString().length > 10\n            ? result.toPrecision(4)\n            : this.formatNumber(result)}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  calculation: state.calculation,\n  result: state.result\n});\n\nexport default connect(mapStateToProps)(Display);\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { clearCalculation } from \"./redux/actions\";\nimport Button from \"./components/Button\";\nimport Display from \"./components/Display\";\n\nconst CalculatorComponent = props => {\n  const { dispatch } = props;\n  return (\n    <div className=\"calculator\">\n      <Display />\n      <div className=\"calculator_wrapper\">\n        <Button value={\"c\"} onClick={() => dispatch(clearCalculation())} />\n        <Button value={\"±\"} />\n        <Button value={\"%\"} />\n\n        <Button value=\"/\" htmlCode=\"247\" additionalClass=\"operator\" />\n\n        <Button value={7} />\n        <Button value={8} />\n        <Button value={9} />\n        <Button value=\"*\" htmlCode=\"215\" additionalClass=\"operator\" />\n\n        <Button value={4} />\n        <Button value={5} />\n        <Button value={6} />\n        <Button value=\"-\" htmlCode=\"8722\" additionalClass=\"operator\" />\n\n        <Button value={1} />\n        <Button value={2} />\n        <Button value={3} />\n        <Button value=\"+\" htmlCode=\"43\" additionalClass=\"operator\" />\n\n        <Button value={0} />\n        <Button value={\".\"} />\n        <Button\n          value={\"=\"}\n          additionalClassWrapper=\"equal\"\n          additionalClass=\"equal\"\n        />\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = state => ({\n  calculation: state.calculation,\n  result: state.result\n});\n\nexport default connect(mapStateToProps)(CalculatorComponent);\n","import ActionTypes from \"../constants\";\nconst { UPDATE_CALCULATION_AND_RESULT, CLEAR_ALL } = ActionTypes;\nconst initialState = {\n  calculation: [],\n  result: 0\n};\n\nconst calculatorReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case UPDATE_CALCULATION_AND_RESULT:\n      return {\n        calculation: action.payload.calculation,\n        result: action.payload.result\n      };\n    case CLEAR_ALL:\n      return {\n        calculation: [],\n        result: 0\n      };\n    default:\n      return state;\n  }\n};\n\nexport default calculatorReducer;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./assets/index.css\";\nimport CalculatorApp from \"./App\";\nimport calculatorReducer from \"./redux/reducers\";\nimport { createStore } from \"redux\";\nimport { Provider } from \"react-redux\";\n\nlet store = createStore(calculatorReducer);\n\nReactDOM.render(\n  <Provider store={store}>\n    <CalculatorApp />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}